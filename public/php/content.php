<?php

    /**************************************************
     
        VARIABLES

    **************************************************/

    // TITLES
    $titles = array(
        "The Largest Star in The Universe",
        "Asteroid Mining", 
        "Solar Storms", 
        "Would Alien Life be Bad?", 
        "What are 'Strange Stars'?", 
        "Stellar Engines", 
        "Neutron Stars", 
        "What is the Dyson Sphere?", 
        "Building a Moon Base", 
        "Building a Mars Base", 
        "White and Black Dwarfs", 
        "Gamma-Ray Bursts", 
        "Black Holes Explained", 
        "The End of The Universe", 
        "Wormholes and space-time"
    );

    // YOUTUBE LINKS
    $links = array(
        "https://www.youtube.com/embed/3mnSDifDSxQ",
        "https://www.youtube.com/embed/y8XvQNt26KI", 
        "https://www.youtube.com/embed/oHHSSJDJ4oo", 
        "https://www.youtube.com/embed/UjtOGPJ0URM", 
        "https://www.youtube.com/embed/p_8yK2kmxoo", 
        "https://www.youtube.com/embed/v3y8AIEX_dU", 
        "https://www.youtube.com/embed/udFxKZRyQt4", 
        "https://www.youtube.com/embed/pP44EPBMb8A", 
        "https://www.youtube.com/embed/NtQkz0aRDe8", 
        "https://www.youtube.com/embed/uqKGREZs6-w", 
        "https://www.youtube.com/embed/qsN1LglrX9s", 
        "https://www.youtube.com/embed/RLykC1VN7NY", 
        "https://www.youtube.com/embed/e-P5IFTqB98&", 
        "https://www.youtube.com/embed/4_aOIA-vyBo", 
        "https://www.youtube.com/embed/9P6rdqiybaw"
    );

    // OVERVIEWS (LARGE TEXT)
    $overviews = array(
        "In this chapter you’ll go into a journey where you’ll discover the real size of The Universe and its stars, with a real size comparison between the different types of luminous astronomical objects, from the things that want to be stars but actually aren’t at a physical level (like brown dwarfs) and main sequence stars (such as red dwarfs), to bigger celestial bodies like giant phase stars (red giants, for example) and hypergiants (like yellow and red hypergiants).",
        "Did you know even small asteroids can contain trillions worth of industrial material? And did you know that some asteroids could contain enough iron and nickel to cover the world’s metal needs for millions of years. So, what if we could replace the mining industry on earth with a clean process that can’t harm anyone? Is asteroid mining the answer? And is it actually worth it? In this chapter we’ll explore all of these aspects.", 
        "In this chapter, we’ll go through one of the most interesting magnetic phenomena in our Solar System: Solar storms. We’ll also study the two types of solar storm, solar flares and coronal mass ejections, which work differently at a physical level. We’ll learn about bigger scale solar storms as well as their effect on planet Earth, including anomalies such as auroras, hurricanes, and much more.", 
        "In this chapter, We first have an introduction to how life and evolution works in general, including the universal principles for civilizations. Then, We'll explore “The Great Filter”, which is most likely the reason why we haven’t discovered any extraterrestrial life forms yet, even though there are lots of habitable planets in The Universe. Along with this, we’ll see why alien life would probably be a catastrophe for our existence.", 
        "In this chapter, we’ll learn about strange matter, a very weird and unstable substance situated at the core of Neutron Stars that “breaks” the laws of physics. We’ll see how it works, behaves, and what it could actually mean to us if we managed to control it. We’ll also explore what the outcome would be if our planet ever came into contact with such a substance, and how dangerous it could be for our Solar System, and even beyond.", 
        "The Universe is extremely unstable and dangerous. The only reason why our planet doesn’t collide with other space objects is that our galaxy is enormous, and there’s usually a lot of space between things. But if we ever happened to encounter a situation like this, the situation would simply be to move the Solar System with a stellar engine. In this chapter, we’ll analyze the Shkadov Thruster and Caplan Thruster hypotheses.", 
        "Neutron stars are one of the most extreme and violent things in the universe. Giant atomic nuclei, only a few kilometers in diameter but as massive as stars. And they owe their existence to the death of something majestic. But how do they work? How are they actually born? What if they collide with each other? And why are they usually compared to black holes in terms of density? We’ll find out in this chapter.", 
        "If humans want to expand into space, it will take us incredible amounts of energy. How do we do that? Easy: we will just use the sun’s energy by realizing the most ambitious construction project in history. How is it built? And how does it actually work? We’ll explore the most popular idea which uses mirrors as its main component. How could humanity manage a project of such a scale? We’ll find out in this chapter.", 
        "In this chapter, we’ll overview the potential that building a moon base has for humanity, evolution and technology, as well as all the technicalities of such a project. We’ll go through each aspect to take into consideration if we ever decide to make such an investment, and we’ll also explore all of the opportunities that could come along with a project like this. Learn all about it in this chapter.", 
        "With its large valleys, polar ice caps, liquid water and even moons, Mars seems pretty familiar. Unfortunately, this planet is extremely hostile, with high temperatures, unbreathable air and poisonous ground. However, it may be the only planet in our Solar System that we might be able to expand to. In this chapter, we’ll overview the Mars base idea, and we’ll go through all of its important details.", 
        "Did you know that 97% of stars eventually become white dwarfs? This process it’s what’s commonly referred to as the death of stars. And what about the other 3%? In this chapter, we’ll go through the stars' life cycle, as well as how these dwarfs are composed, how do they work, what do they mean, and all of the physical details. If you want to find out more, go ahead and watch the video.", 
        "Gamma-ray bursts are like something pulled out of a sci-fi movie, but it’s a phenomenon that’s everything but fictional. These bursts are sorts of beams that come out of black holes if certains conditions are met. The power and speed of these emissions is so great that if the Earth ever happened to be targeted by one of them, everything would be completely destroyed without anyone even noticing. In this chapter, we’ll go through how they really work.", 
        "You probably have already heard about black holes. And you probably don’t know much about them. The truth is that these are one of the most mysterious and bizarre physical phenomena in space. They actually are the most dense objects in The Universe. But what happens if you fall into one? Do you die?Do you go to another dimension? Or does something else happen? We’ll go through all of these questions in this chapter.", 
        "After lots of studies, scientists have come to the conclusion that The Universe is not eternal, and that there are three main scenarios to its end. These are the “Big Rip” (Universe expansion to a point where even atoms separate), “Heat Death” or “Big Freeze” (Universe becoming extremely homogene) and “Big Crunch & Big Bounce” (Continuous contraction and expansion of The Universe). In this chapter, we’ll go more in depth into these theories.", 
        "If you have already heard of wormholes, you probably know that it’s more of a physical than a space related phenomenon. But still, it’s an interesting topic to learn when we talk about space. First off, wormholes are basically “shortcuts” to places that are really far away, like portals to different dimensions. Maybe this sounds a little abstract, so we’ll study this idea more in depth in this chapter."
    );

    // IMAGE FOLDER PATH 
    $image_path = "public/img/";

    // IMAGE REGULAR FORMAT OR EXTENSION
    $image_ext = ".jpg";
    // IMAGES PATH 
    $images = array(
        $image_path."card-img-1".$image_ext,
        $image_path."card-img-2".$image_ext, 
        $image_path."card-img-3".$image_ext, 
        $image_path."card-img-4".$image_ext, 
        $image_path."card-img-5".$image_ext, 
        $image_path."card-img-6".$image_ext, 
        $image_path."card-img-7".$image_ext, 
        $image_path."card-img-8".$image_ext, 
        $image_path."card-img-9".$image_ext, 
        $image_path."card-img-10".$image_ext, 
        $image_path."card-img-11".$image_ext, 
        $image_path."card-img-12".$image_ext, 
        $image_path."card-img-13".$image_ext, 
        $image_path."card-img-14".$image_ext, 
        $image_path."card-img-15".$image_ext
    );

    // HEADINGS (SHORT PREVIEW TEXT)
    $headings = array(
        "What is the largest star in The Universe? And why is it that large? And what are stars anyway? In this chapter, you will learn about the scale of our Universe.",
        "What if we could replace the mining industry on earth with a clean process that can’t harm anyone? In this chapter, we’ll learn how asteroid mining works.", 
        "Even if The Sun looks round and peaceful, sometimes it suddenly vomits radiation and plasma in random directions. In this chapter, we’ll learn about this phenomenon.", 
        "If NASA announced that aliens exist, far from an exciting discovery, it could mean that the end of humanity is almost certain. But why? Learn about it in this chapter.", 
        "Strange matter is one of the most bizarre and unstable types of matter. It even defies the laws of physics as we know it. But what does it do? Learn about it in this chapter.", 
        "Is it really a way to move the Sun? After all, nothing in this world is static, so there actually is a way. In this chapter, we’ll learn about stellar engines.", 
        "Neutron stars are one of the most extreme and violent things in The Universe, almost as much as black holes. But what are they? Learn about it in this chapter.", 
        "What if we were able to use 100% of the Sun's energy? We might even need to at some point of evolution. But how? In this chapter, we’ll learn all about it.", 
        "Humans dream about leaving Earth and travelling through the galaxy. The first step is our moon, so, how could we build a base there? Learn about it in this chapter.", 
        "Some love the idea, some say that it’s terrible. In this chapter, you’ll learn everything you need to know about the “Mars Base” concept.", 
        "Humans can survive in this Universe as long as we have an energy source, but The Universe is not infinite and stars die, or do they? Learn about it in this chapter.", 
        "Image if we could use the power of millions of stars to literally shoot a super weapon. That’s what gamma-ray bursts are all about. Want to learn more about it?", 
        "Black holes are one of the strangest things in existence. They don’t seem to make any sense at all. Where do they come from? And what happens if you fall into one?", 
        "One day, The Universe will die, but why? And will it be dead forever? And how do we know that? In this chapter, you’ll learn about the most accepted hypotheses.", 
        "Are wormholes real? Or are they just “magic” disguised as physics and math? If they are real, how do they work? And how can we find them?"
    );

    // PREFIX FOR ARRAY LINKS
    $lesson_url_prefix = "lesson.php?lesson_id=";
    // CATEFOTY SUFFIX ON URL
    $category_suffix = '&category=';
    // LESSON 
    $lesson_urls = array(
        $lesson_url_prefix."0".$category_suffix."2",
        $lesson_url_prefix."1".$category_suffix."1", 
        $lesson_url_prefix."2".$category_suffix."3", 
        $lesson_url_prefix."3".$category_suffix."3", 
        $lesson_url_prefix."4".$category_suffix."2", 
        $lesson_url_prefix."5".$category_suffix."1", 
        $lesson_url_prefix."6".$category_suffix."2", 
        $lesson_url_prefix."7".$category_suffix."1", 
        $lesson_url_prefix."8".$category_suffix."1", 
        $lesson_url_prefix."9".$category_suffix."1", 
        $lesson_url_prefix."10".$category_suffix."2", 
        $lesson_url_prefix."11".$category_suffix."3", 
        $lesson_url_prefix."12".$category_suffix."2", 
        $lesson_url_prefix."13".$category_suffix."3", 
        $lesson_url_prefix."14".$category_suffix."3"
    );

    // LESSON CATEGORIES
    $categories = array(
        "All",
        "Ideas",
        "Space Objects",
        "Miscellaneous"
    );

    // EACH LESSON'S CATEGORY
    $lesson_categories = array(
        $categories[2],
        $categories[1],
        $categories[3],
        $categories[3],
        $categories[2],
        $categories[1],
        $categories[2],
        $categories[1],
        $categories[1],
        $categories[1],
        $categories[2],
        $categories[3],
        $categories[2],
        $categories[3],
        $categories[3]
    );


    /**************************************************
     
        FUNCTIONS

    **************************************************/

    // ECHO TITLES
    function setTitle($titles, $lesson_id){
        echo $titles[$lesson_id];
    }

    // ECHO VIDEOS
    function setLink($links, $lesson_id){
        echo '
        <iframe
            id="videoFrame" 
            class="embed-responsive-item"
            width="560" 
            height="315" 
            src="';

        echo $links[$lesson_id];
            
        echo '" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            allowfullscreen>
        </iframe>';

    }

    // ECHO OVERVIEWS
    function setOverview($overviews, $lesson_id){

        echo $overviews[$lesson_id];

    }


    // ECHO LESSON CARDS
    function lessonCards($images, $titles, $headings, $lesson_urls, $category, $categories, $lesson_categories, $limit){

        // ECHO CARDS FUNCTION
        function display($images, $titles, $headings, $lesson_urls, $i){
            echo '
                <div class="col-12 col-lg-4 mt-4">
                    <div class="card">
                        <img class="card-img-top" src="'.$images[$i].'" alt="'.$titles[$i].'">
                        <div class="card-body">
                            <h5 class="card-title">'.$titles[$i].'</h5>
                            <p class="card-text">'.$headings[$i].'</p>
                            <a href="'.$lesson_urls[$i].'">
                                <button class="btn btn-primary mt-1 float-right">Learn more</button>
                            </a>
                        </div>
                    </div>
                </div> 
            ';  
        }

        // OPEN ROW
        echo '
            <div class="row" id="lessonList">
        ';

        // IF CATEGORY SELECTED
        if (isset($_GET['category'])){

            // CREATE VARIABLE WITH SELECTED CATEGORY
            $selected_category = $_GET['category'];

            // IF CATEGORY SELECTED
            if ($selected_category == 1 || $selected_category == 2 || $selected_category == 3){

                // LIMIT COUNTER
                $j = 0;
                // MAX COUNTER
                $i = 0;

                while ($i < count($titles)){
                
                    // FILTER LESSONS
                    if ($lesson_categories[$i] == $categories[$selected_category]){

                        // IF ACTIVE PAGE IS LESSON.PHP
                        if (isset($_GET['lesson_id'])){

                            // CREATE VARIABLE WITH CURRENT LESSON ID
                            $lesson_id = $_GET['lesson_id'];

                            // IF THE CURRENT LESSON ID DIFFERS FROM THE ONE THAT'S GOING TO BE ECHOED IN THE LOOP
                            if ($titles[$lesson_id] !== $titles[$i]){

                                // CALL DISPLAY FUNCTION FOR ECHOING PREVIOUSLY FILTERED LESSONS
                                display($images, $titles, $headings, $lesson_urls, $i);

                            // IF THE CURRENT LESSON ID IS THE SAME AS THE I COUNTER
                            } else {

                                // COUNTER LATER J++
                                $j--;

                            }

                        } else {

                            // CALL DISPLAY FUNCTION FOR ECHOING PREVIOUSLY FILTERED LESSONS
                            display($images, $titles, $headings, $lesson_urls, $i);

                        }

                        // PLUS J COUNTER IF LESSONS IS IN CATEGORY
                        $j++;

                        // ONCE J COUNTER REACHES LIMIT
                        if ($j == $limit){

                            // STOP LOOP
                            exit();

                        }

                    } 

                    $i++;
                }

            // IF NO CATEGORY SELECTED
            } else {

                for ($i = 0; $i < $limit; $i++){

                    // CALL DISPLAY FUNCTION FOR ECHOING LESSONS
                    display($images, $titles, $headings, $lesson_urls, $i);

                }

            }

        } else {

            for ($i = 0; $i < $limit; $i++){

                // CALL DISPLAY FUNCTION FOR ECHOING LESSONS
                display($images, $titles, $headings, $lesson_urls, $i);

            }

        }

        // CLOSE COL
        echo '
            </div>
        ';
    }


    // CATEGORY BUTTONS 
    function category_buttons(){

        if (isset($_GET['category'])){

            $selected_category = $_GET['category'];
        
            if ($selected_category == 1){
        
                echo '
                    <button class="btn btn-primary mt-1 mt-1" type="submit" name="category" value="0">All Lessons</button>
                    <button class="btn btn-primary mt-1 mt-1 active" type="submit" name="category" value="1">Space Structures and Ideas</button>
                    <button class="btn btn-primary mt-1 mt-1" type="submit" name="category" value="2">Celestial Objects</button>
                    <button class="btn btn-primary mt-1 mt-1" type="submit" name="category" value="3">Miscellaneous</button>
                ';
        
            } elseif ($selected_category == 2){
        
                echo '
                    <button class="btn btn-primary mt-1" type="submit" name="category" value="0">All Lessons</button>
                    <button class="btn btn-primary mt-1" type="submit" name="category" value="1">Space Structures and Ideas</button>
                    <button class="btn btn-primary mt-1 active" type="submit" name="category" value="2">Celestial Objects</button>
                    <button class="btn btn-primary mt-1" type="submit" name="category" value="3">Miscellaneous</button>
                ';
        
            } elseif ($selected_category == 3){
        
                echo '
                    <button class="btn btn-primary mt-1" type="submit" name="category" value="0">All Lessons</button>
                    <button class="btn btn-primary mt-1" type="submit" name="category" value="1">Space Structures and Ideas</button>
                    <button class="btn btn-primary mt-1" type="submit" name="category" value="2">Celestial Objects</button>
                    <button class="btn btn-primary mt-1 active" type="submit" name="category" value="3">Miscellaneous</button>
                ';
        
            } elseif ($selected_category == 0) {
        
                echo '
                    <button class="btn btn-primary mt-1 active" type="submit" name="category" value="0">All Lessons</button>
                    <button class="btn btn-primary mt-1" type="submit" name="category" value="1">Space Structures and Ideas</button>
                    <button class="btn btn-primary mt-1" type="submit" name="category" value="2">Celestial Objects</button>
                    <button class="btn btn-primary mt-1" type="submit" name="category" value="3">Miscellaneous</button>
                ';
            }
        
        } else {
        
            echo '
                <button class="btn btn-primary mt-1 active" type="submit" name="category" value="0">All Lessons</button>
                <button class="btn btn-primary mt-1" type="submit" name="category" value="1">Space Structures and Ideas</button>
                <button class="btn btn-primary mt-1" type="submit" name="category" value="2">Celestial Objects</button>
                <button class="btn btn-primary mt-1" type="submit" name="category" value="3">Miscellaneous</button>
            ';
        }
    }